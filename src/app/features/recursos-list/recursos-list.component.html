<p-toast></p-toast>
<div class="flex flex-column md:flex-row align-items-start md:align-items-center justify-content-between gap-3 mb-3">
  <div>
    <h2 class="m-0">Recursos</h2>
    <p class="text-500 m-0">Elegí un recurso y reservá un turno disponible.</p>
  </div>
  <div class="flex align-items-center justify-content-end gap-2 w-full md:w-5">
    <p-autoComplete
      [suggestions]="filteredTipos()"
      (completeMethod)="filtrarTipos($event)"
      placeholder="Filtrar por tipo"
      [(ngModel)]="tipoSeleccionado"
      (ngModelChange)="onTipoChange($event)"
      optionLabel="label"
      optionValue="value"
      [dropdown]="true"
      [showClear]="true"
    ></p-autoComplete>
    <button pButton type="button" icon="pi pi-refresh" class="p-button-text" (click)="cargarRecursos()">
      Refrescar
    </button>
  </div>
</div>

<div class="grid">
  @for (recurso of tempRecursos(); track recurso.id) {
    <div class="col-12 md:col-4">
      <p-card
        class="h-full flex flex-column border-round shadow-2 transition-duration-100 transition-all hover:shadow-4"
        [header]="recurso.nombre"
        [subheader]="recurso.tipoRecurso?.nombre || 'Tipo no especificado'"
      >
        <p class="mb-3">{{ recurso.descripcion || 'Sin descripción' }}</p>
        <div class="flex align-items-center justify-content-between mt-auto">
          <p-tag [severity]="recurso.activo ? 'success' : 'danger'">
            {{ recurso.activo ? 'Activo' : 'Inactivo' }}
          </p-tag>
          <button pButton type="button" [routerLink]="['/recursos', recurso.id]">Ver</button>
        </div>
      </p-card>
    </div>
  }
</div>
