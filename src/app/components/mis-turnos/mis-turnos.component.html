<p-toast></p-toast>
<div class="flex align-items-center justify-content-between mb-3">
  <h2 class="m-0">Mis turnos</h2>
  <a routerLink="/recursos" pButton type="button" label="Ver recursos" class="p-button-text"></a>
</div>

@if (turnos().length > 0) {
  <p-table [value]="turnos()">
    <ng-template pTemplate="header">
      <tr>
        <th>Recurso</th>
        <th>Fecha</th>
        <th>Hora inicio</th>
        <th>Hora fin</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-turno>
      <tr>
        <td>{{ turno.recurso?.nombre }}</td>
        <td>{{ turno.fechaHoraInicio | date: 'shortDate' }}</td>
        <td>{{ turno.fechaHoraInicio | date: 'shortTime' }}</td>
        <td>{{ turno.fechaHoraFin | date: 'shortTime' }}</td>
        <td>
          <p-tag [value]="turno.estado" [severity]="estadoSeverity(turno.estado)"></p-tag>
        </td>
        <td>
          <button
            pButton
            type="button"
            icon="pi pi-times"
            label="Cancelar"
            class="p-button-text p-button-danger"
            [disabled]="turno.estado === 'CANCELADO'"
            (click)="cancelar(turno.id)"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
} @else {
  <div class="text-500">
    No tenés turnos aún.
  </div>
}
